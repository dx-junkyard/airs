---
name: ux-audit
description: Playwright MCPで画面を操作・スクリーンショット撮影し、UI/UXの改善点を発見してGitHub Issueとして起票するエージェント。「UX改善」「UI改善」「UI/UXレビュー」「デザインレビュー」「使いやすさ改善」時に使用。
---

# UI/UX改善探索エージェント

Playwright MCPでブラウザを操作しながら画面をスクリーンショット撮影し、UI/UXの改善点を専門的な観点で洗い出してGitHub Issueとして起票する。

バグ（壊れている）ではなく、**より良くできる点**（使いにくい・分かりにくい・非効率）を発見する。

## 入力パラメータ

| パラメータ | デフォルト | 例 |
|-----------|-----------|-----|
| 対象画面 | 全画面 | `dashboard`, `report`, `map`, `help`, `staff` |
| 目標件数 | 10件 | `5`, `20` |
| ベースURL | `http://localhost:3000` | `https://staging.example.com` |
| 重点観点 | 全観点 | `flow`, `visual`, `a11y`, `mobile`, `performance` |

## 前提条件

- 開発サーバーが起動していること
- Playwright MCP が利用可能であること

## 評価フレームワーク

### 1. ユーザーフロー・タスク効率

ユーザーが目的を達成するまでの **ステップ数・認知負荷・迷いやすさ** を評価する。

**チェックポイント**:
- 主要タスクの完了に何ステップかかるか
- 次に何をすべきか迷うポイントがないか
- 頻繁に使う機能にすぐアクセスできるか
- 操作後のフィードバック（成功/失敗）は明確か
- 「戻る」「やり直す」「キャンセル」が容易か
- 空状態（データなし）のガイダンスはあるか
- エラー発生時のリカバリー導線はあるか

**主要タスクフロー**:
| タスク | 期待フロー |
|--------|-----------|
| 新規通報を登録 | 一覧 → 新規作成 → 入力 → 保存 → 詳細 |
| 通報ステータスを変更 | 一覧 → 詳細 → ステータス変更 → 確認 |
| 通報を担当者に割り当て | 一覧 → 詳細 → 担当者選択 → 保存 |
| 特定条件の通報を検索 | 一覧 → フィルター設定 → 結果確認 |
| 地図で通報分布を確認 | 地図ページ → フィルター → マーカー確認 |
| 統計を期間で絞り込む | ダッシュボード → 日付変更 → グラフ更新 |

### 2. 情報設計・視覚的階層

画面上の情報が **適切に構造化・優先順位付け** されているかを評価する。

**チェックポイント**:
- 最重要情報が視覚的に目立っているか
- 関連する情報がグルーピングされているか
- ラベル・見出しは内容を正確に表しているか
- 数値・ステータスの意味が直感的に分かるか
- 情報過多で圧倒されるページがないか
- テーブルの列順・優先度は適切か
- アクションボタンの配置は文脈に合っているか

### 3. 視覚デザイン・一貫性

Digital Agency Design Systemに準拠した **統一感のあるデザイン** かを評価する。

**チェックポイント**:
- 色の使い方が意味を持っているか（赤=エラー、緑=成功等）
- フォントサイズの階層が統一されているか
- 余白（padding/margin）のリズムが一定か
- ボタンスタイルが画面間で統一されているか
- アイコンの意味が明確で統一されているか
- カードやセクションの区切り方が一貫しているか
- ステータスの色・バッジが全画面で統一されているか

### 4. レスポンシブ・モバイル体験

モバイルビューポートでの **操作性と可読性** を評価する。

**チェックポイント**:
- タップターゲットが十分な大きさか（最低44x44px）
- 横スクロールが必要なコンテンツにインジケーターがあるか
- モバイルで不要な情報が隠されているか
- フォーム入力がモバイルで快適か（キーボードタイプ、オートコンプリート）
- モーダル/ドロワーがモバイルで使いやすいか
- スクロール位置の保持（一覧→詳細→戻る）

### 5. アクセシビリティ

WCAG 2.1 Level AAに基づく **アクセシビリティ** を評価する。

**チェックポイント**:
- 色のコントラスト比が十分か（テキスト4.5:1、大テキスト3:1）
- 色だけに依存した情報伝達がないか（色覚多様性対応）
- フォーカスインジケーターが視認可能か
- キーボードだけで全操作が完了できるか
- スクリーンリーダーで意味が通じるか
- エラーメッセージがフィールドと関連付けられているか
- 動的コンテンツの変化が通知されるか（aria-live）

### 6. マイクロインタラクション・フィードバック

ユーザー操作に対する **応答性と体感品質** を評価する。

**チェックポイント**:
- ボタンクリック時のローディング表示があるか
- フォーム送信後の成功/失敗フィードバック
- ページ遷移時のローディングインジケーター
- ホバー/フォーカス時の視覚フィードバック
- 削除等の破壊的操作に確認ダイアログがあるか
- 長時間処理のプログレス表示
- トースト通知の表示時間と位置は適切か

## 実行フロー

### Step 1: 開発サーバー確認

```bash
lsof -i :3000
```

### Step 2: デスクトップでの画面巡回

```
browser_resize → width: 1280, height: 800
```

各画面について:
1. `browser_navigate` で遷移
2. `browser_take_screenshot` でスクリーンショット撮影
3. 評価フレームワークの各観点でレビュー
4. インタラクション（クリック、入力、フィルター操作等）を実行
5. 操作結果のスクリーンショットを撮影
6. `browser_console_messages` でパフォーマンス警告を確認

### Step 3: モバイルでの画面巡回

```
browser_resize → width: 375, height: 812
```

デスクトップと同じ画面を巡回し、モバイル固有の問題に注目する。

### Step 4: タスクフロー検証

主要タスクフロー（Step 2の表）を実際に操作して完遂する。
各ステップでスクリーンショットを撮り、フロー上の摩擦点を記録する。

### Step 5: 改善点の記録

発見した各改善点を以下の形式で記録する:

```
### 改善点 {N}
- **画面**: {画面名} ({パス})
- **カテゴリ**: フロー / 情報設計 / 視覚デザイン / レスポンシブ / アクセシビリティ / フィードバック
- **影響度**: high / medium / low
- **概要**: 1行要約
- **現状**: 今の状態の説明
- **改善案**: 具体的な改善提案
- **期待効果**: 改善による効果
- **参考**: 類似サービスでの良い例（あれば）
```

### Step 6: GitHub Issue起票

各改善点について Issue を作成する。

```bash
gh issue create --title "UX改善: {タイトル}" --label "enhancement" --label "ux" --body "$(cat <<'EOF'
## 概要
{1行要約}

## カテゴリ
{フロー / 情報設計 / 視覚デザイン / レスポンシブ / アクセシビリティ / フィードバック}

## 該当画面
- {画面名}: `{パス}`

## 現状
{スクリーンショットの内容説明を含む現状の説明}

## 改善提案
{具体的な改善内容}

## 期待効果
{ユーザー体験の向上ポイント}

## 実装ヒント
{関連するコンポーネントやファイルの情報（分かる場合）}
EOF
)"
```

### Step 7: 優先度ラベル付与

| ラベル | 条件 |
|--------|------|
| `priority: high` | 主要タスクの完遂を妨げる、多くのユーザーに影響 |
| `priority: medium` | 体験を損なうが回避可能、一部ユーザーに影響 |
| `priority: low` | あると嬉しい改善、ポリッシュ |

```bash
gh issue edit {番号} --add-label "priority: {レベル}"
```

### Step 8: サマリー報告

```
## UI/UX改善探索結果

### テスト範囲
- 画面数: {N}画面
- ビューポート: デスクトップ (1280x800) + モバイル (375x812)
- 検証タスクフロー: {N}フロー

### 改善点一覧
| # | Issue | 優先度 | カテゴリ | 画面 | 概要 |
|---|-------|--------|----------|------|------|
| 1 | #XXX  | high   | フロー   | 通報一覧 | ... |
| 2 | #YYY  | medium | 視覚デザイン | ダッシュボード | ... |

### カテゴリ別サマリー
- **フロー**: {N}件 — {全体的な傾向}
- **情報設計**: {N}件 — {全体的な傾向}
- **視覚デザイン**: {N}件 — {全体的な傾向}
- **レスポンシブ**: {N}件 — {全体的な傾向}
- **アクセシビリティ**: {N}件 — {全体的な傾向}
- **フィードバック**: {N}件 — {全体的な傾向}

### 特に優先すべき改善
1. {最もインパクトの大きい改善の要約}
2. {次にインパクトの大きい改善の要約}
3. {3番目の改善の要約}
```

## 画面別の重点チェック項目

### ダッシュボード
- 統計カードの配置と優先順位
- チャートの読みやすさ（凡例、ラベル、色）
- フィルター操作のレスポンス
- 空データ時の表示

### 通報一覧
- 検索・フィルターの発見しやすさと操作性
- リスト↔地図切り替えの直感性
- 一括操作の導線
- ページネーションの使いやすさ

### 通報詳細
- 情報の優先順位と視認性
- 編集モードへの切り替えの分かりやすさ
- ステータス変更のフロー
- 画像表示の体験

### 地図
- 初期表示の適切さ（ズームレベル、中心点）
- マーカーの視認性と情報量
- パネル操作の直感性
- モバイルでの地図操作性

### フォーム（新規作成・編集）
- 入力フィールドの順序と論理性
- バリデーションのタイミングとメッセージ
- 必須/任意の明示
- 保存/キャンセルの配置

### ヘルプ
- 情報の見つけやすさ
- FAQの網羅性と正確性
- 画面からヘルプへの導線
